/**
 * @fileoverview Firestore Security Rules for the portfolio application.
 *
 * Core Philosophy:
 * This ruleset provides public read access to projects and categories,
 * while restricting write access to authorized users (if implemented).
 * Contact and support requests are publicly writable to allow form submissions.
 *
 * Data Structure:
 * - /projects/{projectId}: Stores project information. Publicly readable.
 * - /categories/{categoryId}: Stores service categories. Publicly readable.
 * - /contacts/{contactId}: Stores contact form submissions. Publicly writable.
 * - /supportRequests/{supportRequestId}: Stores support requests. Publicly writable.
 *
 * Key Security Decisions:
 * - Public read access for projects and categories to showcase portfolio items.
 * - Unrestricted writes for contact and support requests to allow anyone to submit forms.
 * - No user-specific data or ownership enforced in this initial prototype.
 *
 * Denormalization for Authorization:
 * Not applicable in this simplified prototype, as there are no ownership checks or user roles.
 *
 * Structural Segregation:
 * Top-level collections are used for different data types, which simplifies read/write rules.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to project details.  Write access is open for prototyping.
     * @path /projects/{projectId}
     * @allow get, list: Any user can read project details to view the portfolio.
     * @allow create: if false;
     * @allow update: if false;
     * @allow delete: if false;
     * @deny create: No write access granted for this protype.
     * @deny update: No write access granted for this protype.
     * @deny delete: No write access granted for this protype.
     * @principle Allows public read access to showcase portfolio items, but restricts write access.
     */
    match /projects/{projectId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows public read access to service category details. Write access is restricted.
     * @path /categories/{categoryId}
     * @allow get, list: Any user can read service category details.
     * @allow create: if false;
     * @allow update: if false;
     * @allow delete: if false;
     * @deny create: No write access granted for this prototype.
     * @deny update: No write access granted for this prototype.
     * @deny delete: No write access granted for this prototype.
     * @principle Allows public read access to service categories, but restricts write access.
     */
    match /categories/{categoryId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to create contact form submissions. Read, update, and delete are denied.
     * @path /contacts/{contactId}
     * @allow create: Any user can submit a contact form.
     * @allow get: if false;
     * @allow list: if false;
     * @allow update: if false;
     * @allow delete: if false;
     * @deny get: No read access granted for this prototype.
     * @deny list: No read access granted for this prototype.
     * @deny update: No update access granted for this prototype.
     * @deny delete: No delete access granted for this prototype.
     * @principle Allows public contact form submissions while restricting other operations.
     */
    match /contacts/{contactId} {
      allow create: if true;
      allow get: if false;
      allow list: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to create support requests. Read, update, and delete are denied.
     * @path /supportRequests/{supportRequestId}
     * @allow create: Any user can submit a support request.
     * @allow get: if false;
     * @allow list: if false;
     * @allow update: if false;
     * @allow delete: if false;
     * @deny get: No read access granted for this prototype.
     * @deny list: No read access granted for this prototype.
     * @deny update: No update access granted for this prototype.
     * @deny delete: No delete access granted for this prototype.
     * @principle Allows public support request submissions while restricting other operations.
     */
    match /supportRequests/{supportRequestId} {
      allow create: if true;
      allow get: if false;
      allow list: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}