/**
 * @fileoverview Firestore Security Rules for the portfolio application.
 *
 * Core Philosophy:
 * This ruleset enforces a public read-only model for `projects` and `categories` collections.
 * The `contacts` and `supportRequests` collections are secured, preventing unauthorized access.
 *
 * Data Structure:
 * - /projects/{projectId}: Stores project data, publicly readable.
 * - /categories/{categoryId}: Stores category data, publicly readable.
 * - /contacts/{contactId}: Stores contact form submissions, access restricted.
 * - /supportRequests/{supportRequestId}: Stores support requests, access restricted.
 *
 * Key Security Decisions:
 * - Projects and categories are publicly readable to showcase portfolio content.
 * - Contact form submissions and support requests are only writable, list and get are denied.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read project data, but restricts modifications.
     * @path /projects/{projectId}
     * @allow (get, list) Read access is public.
     * @deny (create, update, delete) No one can create, update, or delete projects through the client.  These operations should be performed via backend services.
     * @principle Public read, restricted write.
     */
    match /projects/{projectId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read category data, but restricts modifications.
     * @path /categories/{categoryId}
     * @allow (get, list) Read access is public.
     * @deny (create, update, delete) No one can create, update, or delete categories through the client. These operations should be performed via backend services.
     * @principle Public read, restricted write.
     */
    match /categories/{categoryId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Only allows the creation of contact submissions.
     * @path /contacts/{contactId}
     * @allow (create) Anyone can create a contact submission.
     * @deny (get, list, update, delete) No one can read, list, update, or delete contact submissions.
     * @principle Prevents unauthorized access to contact data.
     */
    match /contacts/{contactId} {
      allow create: if true;
      allow get, list, update, delete: if false;
    }

    /**
     * @description Only allows the creation of support requests.
     * @path /supportRequests/{supportRequestId}
     * @allow (create) Anyone can create a support request.
     * @deny (get, list, update, delete) No one can read, list, update, or delete support requests.
     * @principle Prevents unauthorized access to support request data.
     */
    match /supportRequests/{supportRequestId} {
      allow create: if true;
      allow get, list, update, delete: if false;
    }
  }
}